javascript:(function()%7B%2F%2Fcomplicated%20maths%20to%20resolve%20torque%20axes%0A%20%20%2F%2F%F0%9D%90%B9%F0%9D%91%A0%3D%7C%F0%9D%90%B9%E2%83%97%20%7Ccos(%F0%9D%9C%83%F0%9D%91%A0%2C%F0%9D%90%B9)%0Afunction%20splitAxes(force)%20%7B%0A%20%20var%20angle%20%3D%20geofs.animation.values.heading360%20*%20(Math.PI%2F180)%0A%20%20if%20(geofs.animation.values.atilt%20%3C%3D%200)%20%7B%0A%20%20var%20anglez%20%3D%20geofs.animation.values.atilt%20-%2045%0A%20%20%7D%0A%20%20else%20%7B%0A%20%20%20%20var%20anglez%20%3D%20Math.abs(Math.abs(geofs.animation.values.atilt%20%2B%2045)%20-%20360)%0A%20%20%7D%0A%20%20%0A%20%20fx%20%3D%20force%20*%20(Math.sin(angle))%0A%20%20fy%20%3D%20force%20*%20(Math.cos(angle))%0A%20%20fz%20%3D%20force%20*%20Math.cos(anglez)%0A%20%20return%20%5Bfx%2C%20fy%2C%20fz%5D%3B%0A%7D%0A%0A%2F%2Fstall%20buffeting%0Afunction%20stallForces()%20%7B%0A%20%20if%20(geofs.animation.values.aoa%20%3E%207)%20%7B%0A%20%20%20%20geofs.aircraft.instance.rigidBody.applyTorqueImpulse(%5BsplitAxes(Math.random()*geofs.animation.values.aoa%20*%201000)%5B0%5D%2CsplitAxes(Math.random()*geofs.animation.values.aoa%20*%201000)%5B1%5D%2C0%5D)%0A%20%20%7D%0A%7D%0A%0A%2F%2Fground%20effect%0Afunction%20groundEffect()%20%7B%0A%20%20if%20(geofs.animation.values.haglFeet%20%3C%3D%20100)%20%7B%0A%20%20%20%20geofs.aircraft.instance.rigidBody.applyCentralImpulse(%5B0%2C0%2C(-(geofs.animation.values.haglFeet)%20%2B%20100)%20*%20geofs.animation.values.kias%5D)%0A%20%20%7D%0A%7D%0A%0A%2F%2Ftiller%20restriction%0Ageofs.animation.values.tiller%20%3D%20null%3B%0Afunction%20tiller()%20%7B%0A%20%20if%20(geofs.animation.values.kias%20%3E%3D%2050)%20%7B%0A%20%20%20%20geofs.animation.values.tiller%20%3D%20geofs.animation.values.yaw%20%2F%20(geofs.animation.values.kias%20%2F%205)%0A%20%20%7D%0A%20%20else%20%7B%0A%20%20%20%20geofs.animation.values.tiller%20%3D%20geofs.animation.values.yaw%0A%20%20%7D%0A%7D%0A%0A%2F%2Fspoilers%2Fflaps%20shake%0Ageofs.animation.values.spoilersShake%20%3D%20null%3B%0Ageofs.animation.values.flapsShake%20%3D%20null%3B%0Afunction%20getShake()%20%7B%0A%20%20if%20(geofs.animation.values.airbrakesPosition%20%3D%3D%201)%20%7B%0A%20%20%20%20geofs.animation.values.spoilersShake%20%3D%201%20-%20(Math.random()%20%2F%2020)%20*%20(geofs.animation.values.kias%20%2F%20200)%0A%20%20%7D%0A%20%20else%20%7B%0A%20%20%20%20geofs.animation.values.spoilersShake%20%3D%20geofs.animation.values.airbrakesPosition%0A%20%20%7D%0A%20%20if%20(geofs.animation.values.flapsPosition%20%3D%3D%206)%20%7B%0A%20%20%20%20geofs.animation.values.flapsShake%20%3D%20(Math.random()%20%2F%2020)%20*%20(geofs.animation.values.kias%20%2F%20100)%3B%0A%20%20%7D%0A%20%20else%20%7B%0A%20%20%20%20geofs.animation.values.flapsShake%20%3D%200%3B%0A%20%20%7D%0A%7D%0Ageofs.aircraft.instance.setup.parts%5B106%5D.animations%5B1%5D.value%20%3D%20%22tiller%22%0Ageofs.aircraft.instance.setup.parts%5B60%5D.animations%5B0%5D.value%20%3D%20%22spoilersShake%22%0Ageofs.aircraft.instance.setup.parts%5B61%5D.animations%5B0%5D.value%20%3D%20%22spoilersShake%22%0Ageofs.aircraft.instance.setup.parts%5B62%5D.animations%5B0%5D.value%20%3D%20%22spoilersShake%22%0Ageofs.aircraft.instance.setup.parts%5B63%5D.animations%5B0%5D.value%20%3D%20%22spoilersShake%22%0Ageofs.aircraft.instance.setup.parts%5B64%5D.animations%5B0%5D.value%20%3D%20%22spoilersShake%22%0Ageofs.aircraft.instance.setup.parts%5B65%5D.animations%5B0%5D.value%20%3D%20%22spoilersShake%22%0Ageofs.aircraft.instance.setup.parts%5B66%5D.animations%5B0%5D.value%20%3D%20%22spoilersShake%22%0Ageofs.aircraft.instance.setup.parts%5B67%5D.animations%5B0%5D.value%20%3D%20%22spoilersShake%22%0Ageofs.aircraft.instance.setup.parts%5B68%5D.animations%5B0%5D.value%20%3D%20%22spoilersShake%22%0Ageofs.aircraft.instance.setup.parts%5B69%5D.animations%5B0%5D.value%20%3D%20%22spoilersShake%22%0Ageofs.aircraft.instance.setup.parts%5B70%5D.animations%5B0%5D.value%20%3D%20%22spoilersShake%22%0Ageofs.aircraft.instance.setup.parts%5B71%5D.animations%5B0%5D.value%20%3D%20%22spoilersShake%22%0Ageofs.aircraft.instance.setup.parts%5B72%5D.animations%5B0%5D.value%20%3D%20%22spoilersShake%22%0Ageofs.aircraft.instance.setup.parts%5B73%5D.animations%5B0%5D.value%20%3D%20%22spoilersShake%22%0A%0A%2F%2Fwingflex%20re-assignment%0Afunction%20resetLift2()%7B%0Ageofs.animation.values.liftLeftWing%20%3D%20(-geofs.aircraft.instance.parts.wingleft.lift%20%2F%20200000)%2B(geofs.animation.values.accZ)%2F20%3B%0Ageofs.animation.values.liftRightWing%20%3D%20(-geofs.aircraft.instance.parts.wingright.lift%20%2F%20200000)%2B(geofs.animation.values.accZ)%2F20%3B%0A%7D%3B%0Ageofs.aircraft.instance.setup.parts%5B3%5D.animations%5B1%5D.value%20%3D%20%22liftLeftWing%22%0Ageofs.aircraft.instance.setup.parts%5B4%5D.animations%5B1%5D.value%20%3D%20%22liftLeftWing%22%0Ageofs.aircraft.instance.setup.parts%5B5%5D.animations%5B0%5D.value%20%3D%20%22liftLeftWing%22%0Ageofs.aircraft.instance.setup.parts%5B6%5D.animations%5B0%5D.value%20%3D%20%22liftLeftWing%22%0Ageofs.aircraft.instance.setup.parts%5B7%5D.animations%5B1%5D.value%20%3D%20%22liftLeftWing%22%0Ageofs.aircraft.instance.setup.parts%5B8%5D.animations%5B1%5D.value%20%3D%20%22liftRightWing%22%0Ageofs.aircraft.instance.setup.parts%5B9%5D.animations%5B0%5D.value%20%3D%20%22liftRightWing%22%0Ageofs.aircraft.instance.setup.parts%5B10%5D.animations%5B0%5D.value%20%3D%20%22liftRightWing%22%0A%2F%2Fcheck%20if%20flaps%20are%20changing%20position%0Ageofs.animation.values.flapschange%20%3D%200%0Afunction%20getFlapChange()%7B%0A%20%20if%20(geofs.animation.values.flapsPosition%20%3C%20geofs.animation.values.flapsTarget%20%7C%7C%20geofs.animation.values.flapsPosition%20%3E%20geofs.animation.values.flapsTarget)%7B%0A%20%20%20%20console.log(%22flaps%20extend%22)%0A%20%20%20%20geofs.animation.values.flapschange%20%3D%201%0A%20%20%7D%0A%20%20else%7B%0A%20%20%20%20geofs.animation.values.flapschange%20%3D%200%0A%20%20%7D%0A%7D%0A%0A%2F%2Fassign%20new%20sounds%0Ageofs.aircraft.instance.definition.sounds%5B8%5D%20%3D%20%7B%7D%3B%0Ageofs.aircraft.instance.definition.sounds%5B8%5D.id%20%3D%20%22flapssound%22%0A%20%20geofs.aircraft.instance.definition.sounds%5B8%5D.file%20%3D%20%22https%3A%2F%2F138772948-227015667470610340.preview.editmysite.com%2Fuploads%2F1%2F3%2F8%2F7%2F138772948%2F777flap.mp3%22%0Ageofs.aircraft.instance.definition.sounds%5B8%5D.effects%20%3D%20%7B%22start%22%3A%20%7B%22value%22%3A%20%22flapschange%22%7D%7D%0A%20%20%2F%2Fassign%20alarm%20sounds%0A%20%20geofs.aircraft.instance.definition.sounds%5B9%5D%20%3D%20%7B%7D%3B%0Ageofs.aircraft.instance.definition.sounds%5B9%5D.id%20%3D%20%22landinggearwarn%22%0A%20%20geofs.aircraft.instance.definition.sounds%5B9%5D.file%20%3D%20%22https%3A%2F%2F138772948-227015667470610340.preview.editmysite.com%2Fuploads%2F1%2F3%2F8%2F7%2F138772948%2Ftlg.mp3%22%0Ageofs.aircraft.instance.definition.sounds%5B9%5D.effects%20%3D%20%7B%22start%22%3A%20%7B%22value%22%3A%20%22isGearWarn%22%7D%7D%0A%0A%20%20geofs.aircraft.instance.definition.sounds%5B10%5D%20%3D%20%7B%7D%3B%0Ageofs.aircraft.instance.definition.sounds%5B10%5D.id%20%3D%20%22flapswarn%22%0A%20%20geofs.aircraft.instance.definition.sounds%5B10%5D.file%20%3D%20%22https%3A%2F%2F138772948-227015667470610340.preview.editmysite.com%2Fuploads%2F1%2F3%2F8%2F7%2F138772948%2Ftlf.mp3%22%0Ageofs.aircraft.instance.definition.sounds%5B10%5D.effects%20%3D%20%7B%22start%22%3A%20%7B%22value%22%3A%20%22isFlapsWarn%22%7D%7D%0A%0A%20%20geofs.aircraft.instance.definition.sounds%5B11%5D%20%3D%20%7B%7D%3B%0Ageofs.aircraft.instance.definition.sounds%5B11%5D.id%20%3D%20%22terrainwarn%22%0A%20%20geofs.aircraft.instance.definition.sounds%5B11%5D.file%20%3D%20%22https%3A%2F%2F138772948-227015667470610340.preview.editmysite.com%2Fuploads%2F1%2F3%2F8%2F7%2F138772948%2Ftlt.mp3%22%0Ageofs.aircraft.instance.definition.sounds%5B11%5D.effects%20%3D%20%7B%22start%22%3A%20%7B%22value%22%3A%20%22isTerrainWarn%22%7D%7D%0A%0A%20%20geofs.aircraft.instance.definition.sounds%5B12%5D%20%3D%20%7B%7D%3B%0Ageofs.aircraft.instance.definition.sounds%5B12%5D.id%20%3D%20%22pullwarn%22%0A%20%20geofs.aircraft.instance.definition.sounds%5B12%5D.file%20%3D%20%22https%3A%2F%2F138772948-227015667470610340.preview.editmysite.com%2Fuploads%2F1%2F3%2F8%2F7%2F138772948%2Fpullup.mp3%22%0Ageofs.aircraft.instance.definition.sounds%5B12%5D.effects%20%3D%20%7B%22start%22%3A%20%7B%22value%22%3A%20%22isPullupWarn%22%7D%7D%0A%0A%20%20geofs.aircraft.instance.definition.sounds%5B13%5D%20%3D%20%7B%7D%3B%0Ageofs.aircraft.instance.definition.sounds%5B13%5D.id%20%3D%20%22bankangle%22%0A%20%20geofs.aircraft.instance.definition.sounds%5B13%5D.file%20%3D%20%22https%3A%2F%2F138772948-227015667470610340.preview.editmysite.com%2Fuploads%2F1%2F3%2F8%2F7%2F138772948%2Fbankangle.mp3%22%0Ageofs.aircraft.instance.definition.sounds%5B13%5D.effects%20%3D%20%7B%22start%22%3A%20%7B%22value%22%3A%20%22isBankWarn%22%7D%7D%0A%0A%20%20geofs.aircraft.instance.definition.sounds%5B14%5D%20%3D%20%7B%7D%3B%0Ageofs.aircraft.instance.definition.sounds%5B14%5D.id%20%3D%20%221000%22%0A%20%20geofs.aircraft.instance.definition.sounds%5B14%5D.file%20%3D%20%22https%3A%2F%2F138772948-227015667470610340.preview.editmysite.com%2Fuploads%2F1%2F3%2F8%2F7%2F138772948%2F1000gpws_merged.mp3%22%0Ageofs.aircraft.instance.definition.sounds%5B14%5D.effects%20%3D%20%7B%22start%22%3A%20%7B%22value%22%3A%20%22gpws1000%22%7D%7D%0A%0A%20%20geofs.aircraft.instance.definition.sounds%5B15%5D%20%3D%20%7B%7D%3B%0Ageofs.aircraft.instance.definition.sounds%5B15%5D.id%20%3D%20%22500%22%0A%20%20geofs.aircraft.instance.definition.sounds%5B15%5D.file%20%3D%20%22https%3A%2F%2F138772948-227015667470610340.preview.editmysite.com%2Fuploads%2F1%2F3%2F8%2F7%2F138772948%2F500correct.mp3%22%0Ageofs.aircraft.instance.definition.sounds%5B15%5D.effects%20%3D%20%7B%22start%22%3A%20%7B%22value%22%3A%20%22gpws500%22%7D%7D%0A%0A%20%20geofs.aircraft.instance.definition.sounds%5B16%5D%20%3D%20%7B%7D%3B%0Ageofs.aircraft.instance.definition.sounds%5B16%5D.id%20%3D%20%22400%22%0A%20%20geofs.aircraft.instance.definition.sounds%5B16%5D.file%20%3D%20%22https%3A%2F%2F138772948-227015667470610340.preview.editmysite.com%2Fuploads%2F1%2F3%2F8%2F7%2F138772948%2F400gpws_merged.mp3%22%0Ageofs.aircraft.instance.definition.sounds%5B16%5D.effects%20%3D%20%7B%22start%22%3A%20%7B%22value%22%3A%20%22gpws400%22%7D%7D%0A%0A%20%20geofs.aircraft.instance.definition.sounds%5B17%5D%20%3D%20%7B%7D%3B%0Ageofs.aircraft.instance.definition.sounds%5B17%5D.id%20%3D%20%22300%22%0A%20%20geofs.aircraft.instance.definition.sounds%5B17%5D.file%20%3D%20%22https%3A%2F%2F138772948-227015667470610340.preview.editmysite.com%2Fuploads%2F1%2F3%2F8%2F7%2F138772948%2F300gpws_merged.mp3%22%0Ageofs.aircraft.instance.definition.sounds%5B17%5D.effects%20%3D%20%7B%22start%22%3A%20%7B%22value%22%3A%20%22gpws300%22%7D%7D%0A%0A%20%20geofs.aircraft.instance.definition.sounds%5B18%5D%20%3D%20%7B%7D%3B%0Ageofs.aircraft.instance.definition.sounds%5B18%5D.id%20%3D%20%22200%22%0A%20%20geofs.aircraft.instance.definition.sounds%5B18%5D.file%20%3D%20%22https%3A%2F%2F138772948-227015667470610340.preview.editmysite.com%2Fuploads%2F1%2F3%2F8%2F7%2F138772948%2F200gpws_merged.mp3%22%0Ageofs.aircraft.instance.definition.sounds%5B18%5D.effects%20%3D%20%7B%22start%22%3A%20%7B%22value%22%3A%20%22gpws200%22%7D%7D%0A%0A%20%20geofs.aircraft.instance.definition.sounds%5B19%5D%20%3D%20%7B%7D%3B%0Ageofs.aircraft.instance.definition.sounds%5B19%5D.id%20%3D%20%22100%22%0A%20%20geofs.aircraft.instance.definition.sounds%5B19%5D.file%20%3D%20%22https%3A%2F%2F138772948-227015667470610340.preview.editmysite.com%2Fuploads%2F1%2F3%2F8%2F7%2F138772948%2F100gpws_merged.mp3%22%0Ageofs.aircraft.instance.definition.sounds%5B19%5D.effects%20%3D%20%7B%22start%22%3A%20%7B%22value%22%3A%20%22gpws100%22%7D%7D%0A%0A%20%20geofs.aircraft.instance.definition.sounds%5B20%5D%20%3D%20%7B%7D%3B%0Ageofs.aircraft.instance.definition.sounds%5B20%5D.id%20%3D%20%2250%22%0A%20%20geofs.aircraft.instance.definition.sounds%5B20%5D.file%20%3D%20%22https%3A%2F%2F138772948-227015667470610340.preview.editmysite.com%2Fuploads%2F1%2F3%2F8%2F7%2F138772948%2F50gpws_merged.mp3%22%0Ageofs.aircraft.instance.definition.sounds%5B20%5D.effects%20%3D%20%7B%22start%22%3A%20%7B%22value%22%3A%20%22gpws50%22%7D%7D%0A%0A%20%20geofs.aircraft.instance.definition.sounds%5B21%5D%20%3D%20%7B%7D%3B%0Ageofs.aircraft.instance.definition.sounds%5B21%5D.id%20%3D%20%2240%22%0A%20%20geofs.aircraft.instance.definition.sounds%5B21%5D.file%20%3D%20%22https%3A%2F%2F138772948-227015667470610340.preview.editmysite.com%2Fuploads%2F1%2F3%2F8%2F7%2F138772948%2F40gpws_merged.mp3%22%0Ageofs.aircraft.instance.definition.sounds%5B21%5D.effects%20%3D%20%7B%22start%22%3A%20%7B%22value%22%3A%20%22gpws40%22%7D%7D%0A%0A%20%20geofs.aircraft.instance.definition.sounds%5B22%5D%20%3D%20%7B%7D%3B%0Ageofs.aircraft.instance.definition.sounds%5B22%5D.id%20%3D%20%2230%22%0A%20%20geofs.aircraft.instance.definition.sounds%5B22%5D.file%20%3D%20%22https%3A%2F%2F138772948-227015667470610340.preview.editmysite.com%2Fuploads%2F1%2F3%2F8%2F7%2F138772948%2F30gpws_merged.mp3%22%0Ageofs.aircraft.instance.definition.sounds%5B22%5D.effects%20%3D%20%7B%22start%22%3A%20%7B%22value%22%3A%20%22gpws30%22%7D%7D%0A%0A%20%20geofs.aircraft.instance.definition.sounds%5B23%5D%20%3D%20%7B%7D%3B%0Ageofs.aircraft.instance.definition.sounds%5B23%5D.id%20%3D%20%2220%22%0A%20%20geofs.aircraft.instance.definition.sounds%5B23%5D.file%20%3D%20%22https%3A%2F%2F138772948-227015667470610340.preview.editmysite.com%2Fuploads%2F1%2F3%2F8%2F7%2F138772948%2F20gpws_merged.mp3%22%0Ageofs.aircraft.instance.definition.sounds%5B23%5D.effects%20%3D%20%7B%22start%22%3A%20%7B%22value%22%3A%20%22gpws20%22%7D%7D%0A%0A%20%20geofs.aircraft.instance.definition.sounds%5B24%5D%20%3D%20%7B%7D%3B%0Ageofs.aircraft.instance.definition.sounds%5B24%5D.id%20%3D%20%2210%22%0A%20%20geofs.aircraft.instance.definition.sounds%5B24%5D.file%20%3D%20%22https%3A%2F%2F138772948-227015667470610340.preview.editmysite.com%2Fuploads%2F1%2F3%2F8%2F7%2F138772948%2F10gpws_merged.mp3%22%0Ageofs.aircraft.instance.definition.sounds%5B24%5D.effects%20%3D%20%7B%22start%22%3A%20%7B%22value%22%3A%20%22gpws10%22%7D%7D%0A%0Ageofs.aircraft.instance.definition.sounds%5B0%5D.file%20%3D%20%22https%3A%2F%2F138772948-227015667470610340.preview.editmysite.com%2Fuploads%2F1%2F3%2F8%2F7%2F138772948%2F777enginelow.mp3%22%0Ageofs.aircraft.instance.definition.sounds%5B1%5D.file%20%3D%20%22https%3A%2F%2F138772948-227015667470610340.preview.editmysite.com%2Fuploads%2F1%2F3%2F8%2F7%2F138772948%2F777enginemid.mp3%22%0Ageofs.aircraft.instance.definition.sounds%5B2%5D.file%20%3D%20%22https%3A%2F%2F138772948-227015667470610340.preview.editmysite.com%2Fuploads%2F1%2F3%2F8%2F7%2F138772948%2F777enginehigh.mp3%22%0Ageofs.aircraft.instance.definition.sounds%5B3%5D.file%20%3D%20%22https%3A%2F%2F138772948-227015667470610340.preview.editmysite.com%2Fuploads%2F1%2F3%2F8%2F7%2F138772948%2F777enginehigh.mp3%22%0A%0A%0A%0Aaudio.init(geofs.aircraft.instance.definition.sounds)%0Ageofs.aircraft.instance.definition.sounds%5B0%5D.effects.volume.ratio%20%3D%20100%0Ageofs.aircraft.instance.definition.sounds%5B0%5D.effects.volume.ramp%20%3D%20%5B100%2C%20500%2C%202000%2C%2010000%5D%0Ageofs.aircraft.instance.definition.sounds%5B1%5D.effects.volume.ratio%20%3D%20100%0Ageofs.aircraft.instance.definition.sounds%5B2%5D.effects.volume.ratio%20%3D%20100%0Ageofs.aircraft.instance.definition.sounds%5B3%5D.effects.volume.ratio%20%3D%20100%0Ageofs.aircraft.instance.definition.sounds%5B4%5D.effects.volume.ratio%20%3D%20100%0A%0A%2F%2F%20get%20running%20average%20to%20dampen%20control%20inputs%0Alet%20pitchInputs%20%3D%20%5B0%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%5D%3B%0Alet%20rollInputs%20%3D%20%5B0%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%5D%3B%0Alet%20yawInputs%20%3D%20%5B0%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%5D%3B%0Ageofs.animation.values.averagePitch%20%3D%20null%3B%0Ageofs.animation.values.averageRoll%20%3D%20null%3B%0Ageofs.animation.values.averageYaw%20%3D%20null%3B%0Ageofs.animation.values.outerAveragePitch%20%3D%20null%3B%0Ageofs.animation.values.outerAverageRoll%20%3D%20null%3B%0Ageofs.animation.values.outerAverageYaw%20%3D%20null%3B%0Afunction%20pushInputs()%7B%0A%20%20pitchInputs.push(geofs.animation.values.computedPitch)%3B%0A%20%20rollInputs.push(geofs.animation.values.roll)%3B%0A%20%20yawInputs.push(geofs.animation.values.computedYaw)%3B%0A%7D%0A%0Afunction%20computeOutputs()%7B%0A%20%20if%20(geofs.aircraft.instance.setup.autopilot)%20%7B%0A%20%20%20%20geofs.animation.values.outerAveragePitch%20%3D%20geofs.animation.values.pitch%0Ageofs.animation.values.outerAverageRoll%20%3D%20geofs.animation.values.roll%0Ageofs.animation.values.outerAverageYaw%20%3D%20geofs.animation.values.yaw%0A%20%20%20%20return%3B%0A%20%20%7D%0A%20%20else%20%7B%0Avar%20pitchcheck%20%3D%20movingAvg(pitchInputs%2C%206%2C%206)%3B%0Avar%20rollcheck%20%3D%20movingAvg(rollInputs%2C%206%2C%206)%3B%0A%20var%20yawcheck%20%3D%20movingAvg(yawInputs%2C%206%2C%206)%3B%0A%20%20geofs.animation.values.averagePitch%20%3D%20pitchcheck%5Bpitchcheck.length%20-%203%5D%0Ageofs.animation.values.averageRoll%20%3D%20rollcheck%5Brollcheck.length%20-%203%5D%3B%0Ageofs.animation.values.averageYaw%20%3D%20yawcheck%5Byawcheck.length%20-%203%5D%3B%0A%20%20geofs.animation.values.outerAveragePitch%20%3D%20clamp(geofs.animation.values.averagePitch%20%2F%20(geofs.animation.values.kias%20%2F%20200)%2C%20-1%2C%201)%3B%0Ageofs.animation.values.outerAverageRoll%20%3D%20clamp(geofs.animation.values.averageRoll%20%2F%20(geofs.animation.values.kias%20%2F%20100)%2C%20-1%2C%201)%3B%0Ageofs.animation.values.outerAverageYaw%20%3D%20clamp(geofs.animation.values.averageYaw%20%2F%20(geofs.animation.values.kias%20%2F%20100)%2C%20-1%2C%201)%3B%0A%20%20%7D%0A%7D%0A%0Afunction%20movingAvg(array%2C%20countBefore%2C%20countAfter)%20%7B%0A%20%20if%20(countAfter%20%3D%3D%20undefined)%20countAfter%20%3D%200%3B%0A%20%20const%20result%20%3D%20%5B%5D%3B%0A%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20array.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20const%20subArr%20%3D%20array.slice(Math.max(i%20-%20countBefore%2C%200)%2C%20Math.min(i%20%2B%20countAfter%20%2B%201%2C%20array.length))%3B%0A%20%20%20%20const%20avg%20%3D%20subArr.reduce((a%2C%20b)%20%3D%3E%20a%20%2B%20(isNaN(b)%20%3F%200%20%3A%20b)%2C%200)%20%2F%20subArr.length%3B%0A%20%20%20%20result.push(avg)%3B%0A%20%20%7D%0A%20%20return%20result%3B%0A%7D%0Ageofs.aircraft.instance.parts.aileronleft.animations%5B0%5D.value%20%3D%20%22outerAverageRoll%22%0Ageofs.aircraft.instance.parts.aileronright.animations%5B0%5D.value%20%3D%20%22outerAverageRoll%22%0Ageofs.aircraft.instance.parts.flaperonleft.animations%5B0%5D.value%20%3D%20%22averageRoll%22%0Ageofs.aircraft.instance.parts.flaperonright.animations%5B0%5D.value%20%3D%20%22averageRoll%22%0Ageofs.aircraft.instance.parts.elevleft.animations%5B0%5D.value%20%3D%20%22outerAveragePitch%22%0Ageofs.aircraft.instance.parts.elevright.animations%5B0%5D.value%20%3D%20%22outerAveragePitch%22%0Ageofs.aircraft.instance.parts.rudder.animations%5B0%5D.value%20%3D%20%22averageYaw%22%0A%0Ageofs.animation.values.computedPitch%20%3D%200%0Ageofs.animation.values.computedYaw%20%3D%200%0Ageofs.animation.values.computedRoll%20%3D%200%0Alet%20lastPitchValue%20%3D%200%0Alet%20gLimitedPitch%20%3D%20%200%0Alet%20increment%20%3D%200%0Alet%20deadZone%20%3D%200.01%0Alet%20tiltToHold%20%3D%200%0Alet%20pitchStage1%20%3D%200%0Afunction%20computePitch()%7B%0A%2F%2Fimplement%20tilt%20hold%0A%20%20if%20(geofs.animation.values.pitch%20%3C%3D%20deadZone%20%26%26%20geofs.animation.values.pitch%20%3E%3D%20-deadZone)%7B%0A%20%20%20%20%0A%20%20pitchStage1%20%3D%20-(tiltToHold%20-%20geofs.animation.values.atilt)%20%2F%2010%0A%20%20%20%20%0A%7D%0A%20%20else%7B%0A%20%20%20%20tiltToHold%20%3D%20geofs.animation.values.atilt%0A%20%20%20%20pitchStage1%20%3D%20geofs.animation.values.pitch%0A%20%20%7D%0A%20%20geofs.animation.values.computedPitch%20%3D%20clamp(pitchStage1%2C%20-1%2C%201)%0A%7D%0A%0Afunction%20computeYaw()%7B%0A%20%20%20%20%20%20if%20(geofs.animation.values.atilt%20%3E%3D%20-70%20%26%26%20geofs.animation.values.atilt%20%3C%3D%2070)%7B%0A%20%20if%20(geofs.animation.values.gearPosition%20%3D%3D%201)%7B%0A%20%20%20%20if%20(geofs.animation.values.aroll%20%3E%3D%20-75%20%26%26%20geofs.animation.values.aroll%20%3C%3D%2075)%7B%0A%20%20geofs.animation.values.computedYaw%20%3D%20clamp(geofs.animation.values.yaw%20-%20(%20geofs.aircraft.instance.htrAngularSpeed%5B0%5D*50)%2C%20-1%2C%201)%0A%20%20%20%20%7D%0A%20%20%20%20if%20(geofs.animation.values.aroll%20%3C%3D%20-75%20%26%26%20geofs.animation.values.aroll%20%3E%3D%20-90)%7B%0A%20%20%20%20%20%20%20%20geofs.animation.values.computedYaw%20%3D%20clamp(geofs.animation.values.yaw%20-%20(%20geofs.aircraft.instance.htrAngularSpeed%5B0%5D*50)%2C%20-1%2C%201)%0A%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(geofs.animation.values.aroll%20%3C%3D%20-90%20%26%26%20geofs.animation.values.aroll%20%3E%3D%20-105)%7B%0A%20%20%20%20%20%20%20%20geofs.animation.values.computedYaw%20%3D%20clamp(geofs.animation.values.yaw%20%2B%20(%20geofs.aircraft.instance.htrAngularSpeed%5B0%5D*50)%2C%20-1%2C%201)%0A%20%20%20%20%7D%0A%20%20%20%20if%20(geofs.animation.values.aroll%20%3C%3D%2075%20%26%26%20geofs.animation.values.aroll%20%3E%3D%2090)%7B%0A%20%20%20%20%20%20%20%20geofs.animation.values.computedYaw%20%3D%20clamp(geofs.animation.values.yaw%20-%20(%20geofs.aircraft.instance.htrAngularSpeed%5B0%5D*50)%2C%20-1%2C%201)%0A%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(geofs.animation.values.aroll%20%3C%3D%2090%20%26%26%20geofs.animation.values.aroll%20%3E%3D%20105)%7B%0A%20%20%20%20%20%20%20%20geofs.animation.values.computedYaw%20%3D%20clamp(geofs.animation.values.yaw%20%2B%20(%20geofs.aircraft.instance.htrAngularSpeed%5B0%5D*50)%2C%20-1%2C%201)%0A%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(geofs.animation.values.aroll%20%3C%3D%20-75%20%26%26%20geofs.animation.values.aroll%20%3E%3D%2075)%7B%0A%20%20%20%20%20%20%20%20geofs.animation.values.computedYaw%20%3D%20clamp(geofs.animation.values.yaw%20%2B%20(%20geofs.aircraft.instance.htrAngularSpeed%5B0%5D*50)%2C%20-1%2C%201)%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20else%7B%0A%20%20%20%20if%20(geofs.animation.values.aroll%20%3E%3D%20-75%20%26%26%20geofs.animation.values.aroll%20%3C%3D%2075)%7B%0A%20%20geofs.animation.values.computedYaw%20%3D%20clamp(geofs.animation.values.yaw%20-%20(%20geofs.aircraft.instance.htrAngularSpeed%5B0%5D*50)%2C%20-1%2C%201)%20%2F%202%0A%20%20%20%20%7D%0A%20%20%20%20if%20(geofs.animation.values.aroll%20%3C%3D%20-75%20%26%26%20geofs.animation.values.aroll%20%3E%3D%20-90)%7B%0A%20%20%20%20%20%20%20%20geofs.animation.values.computedYaw%20%3D%20clamp(geofs.animation.values.yaw%20-%20(%20geofs.aircraft.instance.htrAngularSpeed%5B0%5D*50)%2C%20-1%2C%201)%20%2F%202%0A%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(geofs.animation.values.aroll%20%3C%3D%20-90%20%26%26%20geofs.animation.values.aroll%20%3E%3D%20-105)%7B%0A%20%20%20%20%20%20%20%20geofs.animation.values.computedYaw%20%3D%20clamp(geofs.animation.values.yaw%20%2B%20(%20geofs.aircraft.instance.htrAngularSpeed%5B0%5D*50)%2C%20-1%2C%201)%20%2F%202%0A%20%20%20%20%7D%0A%20%20%20%20if%20(geofs.animation.values.aroll%20%3C%3D%2075%20%26%26%20geofs.animation.values.aroll%20%3E%3D%2090)%7B%0A%20%20%20%20%20%20%20%20geofs.animation.values.computedYaw%20%3D%20clamp(geofs.animation.values.yaw%20-%20(%20geofs.aircraft.instance.htrAngularSpeed%5B0%5D*50)%2C%20-1%2C%201)%20%2F%202%0A%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(geofs.animation.values.aroll%20%3C%3D%2090%20%26%26%20geofs.animation.values.aroll%20%3E%3D%20105)%7B%0A%20%20%20%20%20%20%20%20geofs.animation.values.computedYaw%20%3D%20clamp(geofs.animation.values.yaw%20%2B%20(%20geofs.aircraft.instance.htrAngularSpeed%5B0%5D*50)%2C%20-1%2C%201)%20%2F%202%0A%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(geofs.animation.values.aroll%20%3E%3D%2075%20%26%26%20geofs.animation.values.aroll%20%3C%3D%20-75)%7B%0A%20%20%20%20%20%20%20%20geofs.animation.values.computedYaw%20%3D%20clamp(geofs.animation.values.yaw%20%2B%20(%20geofs.aircraft.instance.htrAngularSpeed%5B0%5D*50)%2C%20-1%2C%201)%20%2F%202%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20else%7B%0A%20%20%20%20geofs.animation.values.computedYaw%20%3D%20geofs.animation.values.yaw%0A%20%20%7D%0A%7D%0A%0A%0A%2F%2Fimplement%20smooth%20gear%20tilting%0Alet%20restingPoint%20%3D%2016.152139372973117%0Ageofs.animation.values.gearTilt%20%3D%20null%3B%0A%0Afunction%20tiltGear()%7B%0A%20%20if%20(geofs.animation.values.haglFeet%20%3C%3D%2018)%7B%0A%20%20%20%20geofs.animation.values.gearTilt%20%3D%20clamp((restingPoint%20*%20geofs.animation.values.haglFeet)%2F15%2C%2018.5%2C%2020)%0A%20%20%7D%0A%7D%0A%0Ageofs.aircraft.instance.parts.bogeyright.animations%5B0%5D.value%20%3D%20%22gearTilt%22%0Ageofs.aircraft.instance.parts.bogeyleft.animations%5B0%5D.value%20%3D%20%22gearTilt%22%0Ageofs.aircraft.instance.parts.bogeyright.animations%5B0%5D.offset%20%3D%20-27%0Ageofs.aircraft.instance.parts.bogeyleft.animations%5B0%5D.offset%20%3D%20-27%0A%20delete%20geofs.aircraft.instance.parts.bogeyright.animations%5B0%5D.lt%0Adelete%20geofs.aircraft.instance.parts.bogeyleft.animations%5B0%5D.lt%0A%0A%0A%0A%0A%2F%2Fdetect%20and%20execute%20GPWS%20callouts%0Alet%20isApprConfig%20%3D%20false%3B%0A%20geofs.animation.values.isFlapsWarn%20%3D%200%3B%0Ageofs.animation.values.isGearWarn%20%3D%200%3B%0Ageofs.animation.values.isTerrainWarn%20%3D%200%3B%0A%20geofs.animation.values.isPullupWarn%20%3D%200%3B%0A%20geofs.animation.values.isBankWarn%20%3D%200%3B%0A%20geofs.animation.values.gpws1000%20%3D%200%3B%0A%20geofs.animation.values.gpws500%20%3D%200%3B%0A%20geofs.animation.values.gpws400%20%3D%200%3B%0A%20geofs.animation.values.gpws300%20%3D%200%3B%0A%20geofs.animation.values.gpws200%20%3D%200%3B%0A%20geofs.animation.values.gpws100%20%3D%200%3B%0A%20geofs.animation.values.gpws50%20%3D%200%3B%0A%20geofs.animation.values.gpws40%20%3D%200%3B%0A%20geofs.animation.values.gpws30%20%3D%200%3B%0A%20geofs.animation.values.gpws20%20%3D%200%3B%0A%20geofs.animation.values.gpws10%20%3D%200%3B%0A%0Afunction%20getGearFlapsWarn()%20%7B%0Aif%20(geofs.animation.values.groundContact%20%3D%3D%201)%20%7B%0A%20%20geofs.animation.values.isGearWarn%20%3D%200%3B%0A%20%20geofs.animation.values.isFlapsWarn%20%3D%200%3B%0A%20%20return%3B%0A%7D%0A%09if%20(geofs.animation.values.haglFeet%20%3C%3D%20500%20%26%26%20geofs.animation.values.gearPosition%20%3D%3D%201%20%26%26%20geofs.animation.values.climbrate%20%3C%200%20%26%26%20geofs.animation.values.isPullupWarn%20%3D%3D%200)%20%7B%0A%09%09geofs.animation.values.isGearWarn%20%3D%201%3B%0A%09%7D%20else%20%7B%0A%09%09geofs.animation.values.isGearWarn%20%3D%200%3B%0A%09%7D%0A%0A%09if%20(geofs.animation.values.haglFeet%20%3C%3D%201000%20%26%26%20geofs.animation.values.flapsPosition%20%3D%3D%200%20%26%26%20geofs.animation.values.climbrate%20%3C%200%20%26%26%20geofs.animation.values.isPullupWarn%20%3D%3D%200)%20%7B%0A%09%09geofs.animation.values.isFlapsWarn%20%3D%201%3B%0A%09%7D%20else%20%7B%0A%09%09geofs.animation.values.isFlapsWarn%20%3D%200%3B%0A%09%7D%0A%7D%0A%0Afunction%20testTerrainorAppr()%20%7B%0A%09if%20(geofs.animation.values.gearPosition%20%3D%3D%200)%20%7B%0A%09%09if%20(geofs.animation.values.haglFeet%20%3C%3D%201000%20%26%26%20geofs.animation.values.climbrate%20%3C%3D%20-100%20%26%26%20geofs.animation.values.climbrate%20%3E%3D%20-5000%20%26%26%20geofs.animation.values.isGearWarn%20%3D%3D%200%20%26%26%20geofs.animation.values.isFlapsWarn%20%3D%3D%200%20%26%26%20isApprConfig%20%3D%3D%200)%20%7B%0A%09%09%09geofs.animation.values.isTerrainWarn%20%3D%201%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09geofs.animation.values.isTerrainWarn%20%3D%200%3B%0A%09%09%7D%0A%0A%09%09if%20(geofs.animation.values.haglFeet%20%3C%3D%205000%20%26%26%20geofs.animation.values.climbrate%20%3C%3D%20-2000%20%7C%7C%20geofs.animation.values.haglFeet%20%3C%3D%201000%20%26%26%20geofs.animation.values.climbrate%20%3C%3D%20-5000)%20%7B%0A%09%09%09geofs.animation.values.isPullupWarn%20%3D%201%3B%0A%09%09%7D%20else%20%7B%0A%09%09%09geofs.animation.values.isPullupWarn%20%3D%200%3B%0A%09%09%7D%0A%09%7D%20else%20%7B%0A%09%09geofs.animation.values.isTerrainWarn%20%3D%200%3B%0A%20%20%20%20geofs.animation.values.isPullupWarn%20%3D%200%3B%0A%09%09return%3B%0A%09%7D%0A%7D%0A%0A%0Afunction%20testForApproach()%7B%0A%20%20if%20(geofs.animation.values.isFlapsWarn%20%3D%3D%200%20%26%26%20geofs.animation.values.isGearWarn%20%3D%3D%200%20%26%26%20geofs.animation.values.climbrate%20%3C%3D%20-1)%7B%0A%20%20%20%20isApprConfig%20%3D%20true%0A%20%20%7D%0A%20%20else%7B%0A%20%20%20%20isApprConfig%20%3D%20false%0A%20%20%7D%0A%7D%0A%0Afunction%20doRadioAltCall()%7B%0A%20%20if%20(isApprConfig)%7B%0A%20%20if%20(geofs.animation.values.haglFeet%20%3C%3D%201000%20%2B%20restingPoint%20%26%26%20geofs.animation.values.haglFeet%20%3E%3D%20900%20%2B%20restingPoint)%7B%0A%20%20%20%20geofs.animation.values.gpws1000%20%3D%201%3B%0A%20%20%7D%0A%20%20else%7B%0A%20%20%20%20geofs.animation.values.gpws1000%20%3D%200%3B%0A%20%20%7D%0A%20%20%20if%20(geofs.animation.values.haglFeet%20%3C%3D%20500%20%2B%20restingPoint%20%26%26%20geofs.animation.values.haglFeet%20%3E%3D%20400%20%2B%20restingPoint)%7B%0A%20%20%20%20geofs.animation.values.gpws500%20%3D%201%3B%0A%20%20%7D%0A%20%20else%7B%0A%20%20%20%20geofs.animation.values.gpws500%20%3D%200%3B%0A%20%20%7D%20%0A%20%20%20if%20(geofs.animation.values.haglFeet%20%3C%3D%20400%20%2B%20restingPoint%20%26%26%20geofs.animation.values.haglFeet%20%3E%3D%20300%20%2B%20restingPoint)%7B%0A%20%20%20%20geofs.animation.values.gpws400%20%3D%201%3B%0A%20%20%7D%0A%20%20else%7B%0A%20%20%20%20geofs.animation.values.gpws400%20%3D%200%3B%0A%20%20%7D%20%0A%20%20%20if%20(geofs.animation.values.haglFeet%20%3C%3D%20300%20%2B%20restingPoint%20%26%26%20geofs.animation.values.haglFeet%20%3E%3D%20200%20%2B%20restingPoint)%7B%0A%20%20%20%20geofs.animation.values.gpws300%20%3D%201%3B%0A%20%20%7D%0A%20%20else%7B%0A%20%20%20%20geofs.animation.values.gpws300%20%3D%200%3B%0A%20%20%7D%20%0A%20%20%20if%20(geofs.animation.values.haglFeet%20%3C%3D%20200%20%2B%20restingPoint%20%26%26%20geofs.animation.values.haglFeet%20%3E%3D%20100%20%2B%20restingPoint)%7B%0A%20%20%20%20geofs.animation.values.gpws200%20%3D%201%3B%0A%20%20%7D%0A%20%20else%7B%0A%20%20%20%20geofs.animation.values.gpws200%20%3D%200%3B%0A%20%20%7D%20%0A%20%20%20if%20(geofs.animation.values.haglFeet%20%3C%3D%20100%20%2B%20restingPoint%20%26%26%20geofs.animation.values.haglFeet%20%3E%3D%2050%20%2B%20restingPoint)%7B%0A%20%20%20%20geofs.animation.values.gpws100%20%3D%201%3B%0A%20%20%7D%0A%20%20else%7B%0A%20%20%20%20geofs.animation.values.gpws100%20%3D%200%3B%0A%20%20%7D%20%0A%20%20%20if%20(geofs.animation.values.haglFeet%20%3C%3D%2050%20%2B%20restingPoint%20%26%26%20geofs.animation.values.haglFeet%20%3E%3D%2040%20%2B%20restingPoint)%7B%0A%20%20%20%20geofs.animation.values.gpws50%20%3D%201%3B%0A%20%20%7D%0A%20%20else%7B%0A%20%20%20%20geofs.animation.values.gpws50%20%3D%200%3B%0A%20%20%7D%20%0A%20%20%20if%20(geofs.animation.values.haglFeet%20%3C%3D%2040%20%2B%20restingPoint%20%26%26%20geofs.animation.values.haglFeet%20%3E%3D%2030%20%2B%20restingPoint)%7B%0A%20%20%20%20geofs.animation.values.gpws40%20%3D%201%3B%0A%20%20%7D%0A%20%20else%7B%0A%20%20%20%20geofs.animation.values.gpws40%20%3D%200%3B%0A%20%20%7D%20%0A%20%20%20if%20(geofs.animation.values.haglFeet%20%3C%3D%2030%20%2B%20restingPoint%20%26%26%20geofs.animation.values.haglFeet%20%3E%3D%2020%20%2B%20restingPoint)%7B%0A%20%20%20%20geofs.animation.values.gpws30%20%3D%201%3B%0A%20%20%7D%0A%20%20else%7B%0A%20%20%20%20geofs.animation.values.gpws30%20%3D%200%3B%0A%20%20%7D%20%0A%20%20%20if%20(geofs.animation.values.haglFeet%20%3C%3D%2020%20%2B%20restingPoint%20%26%26%20geofs.animation.values.haglFeet%20%3E%3D%2010%20%2B%20restingPoint)%7B%0A%20%20%20%20geofs.animation.values.gpws20%20%3D%201%3B%0A%20%20%7D%0A%20%20else%7B%0A%20%20%20%20geofs.animation.values.gpws20%20%3D%200%3B%0A%20%20%7D%20%0A%20%20%20if%20(geofs.animation.values.haglFeet%20%3C%3D%2010%20%2B%20restingPoint%20%26%26%20geofs.animation.values.haglFeet%20%3E%3D%205%20%2B%20restingPoint)%7B%0A%20%20%20%20geofs.animation.values.gpws10%20%3D%201%3B%0A%20%20%7D%0A%20%20else%7B%0A%20%20%20%20geofs.animation.values.gpws10%20%3D%200%3B%0A%20%20%7D%20%0A%7D%0A%20%20else%20%7B%0A%20%20%20%20geofs.animation.values.gpws1000%20%3D%200%3B%0A%20%20%20%20geofs.animation.values.gpws500%20%3D%200%3B%0A%20%20%20%20geofs.animation.values.gpws400%20%3D%200%3B%0A%20%20%20%20geofs.animation.values.gpws300%20%3D%200%3B%0A%20%20%20%20geofs.animation.values.gpws200%20%3D%200%3B%0A%20%20%20%20geofs.animation.values.gpws100%20%3D%200%3B%0A%20%20%20%20geofs.animation.values.gpws50%20%3D%200%3B%0A%20%20%20%20geofs.animation.values.gpws40%20%3D%200%3B%0A%20%20%20%20geofs.animation.values.gpws30%20%3D%200%3B%0A%20%20%20%20geofs.animation.values.gpws20%20%3D%200%3B%0A%20%20%20%20geofs.animation.values.gpws10%20%3D%200%3B%0A%20%20%7D%0A%7D%0A%0A%20%20%0AsetInterval(function()%7B%0A%20%20groundEffect()%0A%20%20getShake()%0A%20%20computeYaw()%0A%20%20tiltGear()%3B%0A%20%20computePitch()%3B%0A%20%20pushInputs()%3B%0A%20%20computeOutputs()%3B%0A%20%20resetLift2()%3B%0A%20%20getFlapChange()%3B%0A%20%20getGearFlapsWarn()%0A%20%20testTerrainorAppr()%0A%20%20testForApproach()%0A%20%20doRadioAltCall()%0A%20%20tiller()%0A%20%20stallForces()%0A%7D%2C%2020)%7D)()%3B
